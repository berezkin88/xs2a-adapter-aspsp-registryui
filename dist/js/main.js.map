{"version":3,"sources":["addEventListeners.js","globals.js","uneditableCells.js","toggleButtons.js","editableCells.js","searchButton.js","addRowButton.js","UUIDGenerator.js","greenButton.js","redButton.js","editButton.js","deleteButton.js","updateButton.js","saveButton.js","purgeRow.js","buildRow.js","showTable.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["setTimeout(function () {\n    initGlobals();\n    document.querySelector(\".edit-cell>button.edit\").addEventListener(\"click\", function () { editButton(this) });\n    document.querySelector(\".edit-cell>button.update\").addEventListener(\"click\", function () { greenButton(this) });\n    document.querySelector(\".edit-cell>button.delete\").addEventListener(\"click\", function () { redButton(this) });\n    document.querySelector(\"#add>button\").addEventListener(\"click\", addRow);\n}, 0)\n","function initGlobals() {\n    window.HIDDEN_ROW = document.querySelector(\"tbody>tr.hidden\");\n    window.COUNTER = 0;\n}\n","function uneditableCells(e) {\n    let rowCells = e.parentElement.parentElement.cells;\n\n    for (let i = 1, till = (rowCells.length - 1); i < till; i++) {\n        rowCells[i].removeAttribute(\"contenteditable\");\n    }\n}\n","function toggleButtons(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    if (editButton.style.display === \"none\") {\n        editButton.style.display = \"inherit\";\n        updateOrSaveButton.style.display = \"none\";\n        deleteButton.style.display = \"none\";\n        uneditableCells(e);\n    } else {\n        editButton.style.display = \"none\";\n        updateOrSaveButton.style.display = \"inherit\";\n        deleteButton.style.display = \"inherit\";\n        editableCells(e);\n    }\n}\n","function editableCells(e) {\n    let rowCells = e.parentElement.parentElement.cells;\n\n    for (let i = 1, till = (rowCells.length - 1); i < till; i++) {\n        rowCells[i].setAttribute(\"contenteditable\", true);\n    }\n}\n","function search() {\n    let data = document.querySelector(\".search-form\");\n    let url = \"http://localhost:8999/v1/aspsps/?\";\n\n    if (data[0].value !== \"\")\n        url += \"name=\" + data[0].value + \"&\";\n    \n    if (data[1].value !== \"\")\n        url += \"bic=\" + data[1].value + \"&\";\n\n    if (data[2].value !== \"\")\n        url += \"bankCode=\" + data[2].value;\n\n    // let output = fetch(url).then(response => response.json());\n    // output.forEach((node) => buildRow(node));\n\n    let mockRawData = '[{\"id\":\"40885a41-339e-4c92-a43f-77264bc6059c\",\"name\":\"Sparkasse Burbach-Neunkirchen\",\"bic\":\"WELADED1BUB\",\"bankCode\":\"46051240\",\"url\":\"https://xs2a-sandbox.f-i-apim.de:8444/fixs2a-env/xs2a-api/12345678\",\"adapterId\":\"sparkasse-adapter\",\"paginationId\":\"0:1.0\"},{\"id\":\"1edbdcff-ce4a-42ad-a0a5-dd4767ae0443\",\"name\":\"Sparkasse Vorpommern\",\"bic\":\"NOLADE21GRW\",\"bankCode\":\"15050500\",\"url\":\"https://xs2a-sandbox.f-i-apim.de:8444/fixs2a-env/xs2a-api/12345678\",\"adapterId\":\"sparkasse-adapter\",\"paginationId\":\"1:1.0\"},{\"id\":\"4d18ff59-fd1e-4e1d-adbc-d2f58a757df7\",\"name\":\"VB B.Drib.-Brakel-Steinh.e\",\"bic\":\"GENODEM1BOT\",\"bankCode\":\"47267216\",\"url\":\"https://xs2a-test.fiduciagad.de/xs2a\",\"adapterId\":\"fiducia-adapter\",\"paginationId\":\"2:1.0\"},{\"id\":\"872fe1c4-dff7-4e8a-84f1-cf2b07640d1e\",\"name\":\"Landessparkasse zu Oldenburg\",\"bic\":\"SLZODE22XXX\",\"bankCode\":\"28050100\",\"url\":\"https://xs2a-sandbox.f-i-apim.de:8444/fixs2a-env/xs2a-api/12345678\",\"adapterId\":\"sparkasse-adapter\",\"paginationId\":\"3:1.0\"},{\"id\":\"5f3a66d6-175b-457b-a81c-e533160848b6\",\"name\":\"Volksbank Schwarzwald Baar Hegau\",\"bic\":\"GENODE61VS1\",\"bankCode\":\"69490000\",\"url\":\"https://xs2a-test.fiduciagad.de/xs2a\",\"adapterId\":\"fiducia-adapter\",\"paginationId\":\"4:1.0\"},{\"id\":\"457089d0-f926-4786-b345-92b7e16cafda\",\"name\":\"VR PLUS Altmark-Wendland eG\",\"bic\":\"GENODEF1LCH\",\"bankCode\":\"\",\"url\":\"https://xs2a-test.fiduciagad.de/xs2a\",\"adapterId\":\"fiducia-adapter\",\"paginationId\":\"5:1.0\"},{\"id\":\"64a7c636-6a85-4a2d-af35-e46cc8bc0b10\",\"name\":\"Volksbank Sauerland eG\",\"bic\":\"GENODEM1SRL\",\"bankCode\":\"46461126\",\"url\":\"https://xs2a-test.fiduciagad.de/xs2a\",\"adapterId\":\"fiducia-adapter\",\"paginationId\":\"6:1.0\"},{\"id\":\"7234d7b1-88d2-46ae-af3f-4f0cc13b5a38\",\"name\":\"Kreissparkasse Gelnhausen\",\"bic\":\"HELADEF1GEL\",\"bankCode\":\"50750094\",\"url\":\"https://xs2a-sandbox.f-i-apim.de:8444/fixs2a-env/xs2a-api/12345678\",\"adapterId\":\"sparkasse-adapter\",\"paginationId\":\"7:1.0\"},{\"id\":\"398f9231-8f25-49cd-95ba-f9977803a295\",\"name\":\"Sparkasse Gera-Greiz\",\"bic\":\"HELADEF1GER\",\"bankCode\":\"83050000\",\"url\":\"https://xs2a-sandbox.f-i-apim.de:8444/fixs2a-env/xs2a-api/12345678\",\"adapterId\":\"sparkasse-adapter\",\"paginationId\":\"8:1.0\"},{\"id\":\"0b876747-a443-40f3-b7a1-4eda85b04a0d\",\"name\":\"VR-Bank Gerolzhofen\",\"bic\":\"GENODEF1GZH\",\"bankCode\":\"79362081\",\"url\":\"https://xs2a-test.fiduciagad.de/xs2a\",\"adapterId\":\"fiducia-adapter\",\"paginationId\":\"9:1.0\"}]';\n\n    let mockJson = JSON.parse(mockRawData);\n\n    mockJson.forEach((node) => buildRow(node));\n\n    if (HIDDEN_ROW.parentElement.parentElement.hidden) {\n        showTable();\n    }\n}","function addRow() {\n    let editId = \"edit-\";\n    let updateId = \"update-\";\n    let deleteId = \"delete-\";\n\n    let clone = HIDDEN_ROW.cloneNode(true);\n    clone.cells[0].textContent = uuid();\n    clone.removeAttribute(\"class\");\n    clone.setAttribute(\"class\", \"new\");\n    clone.lastElementChild.childNodes.forEach(e => {\n        if (e.className) {\n            if (e.className.indexOf(\"edit\") > -1) {\n                let helper = e.parentNode.childNodes[7];\n    \n                e.addEventListener(\"click\", () => { editButton(e) })\n                e.setAttribute(\"id\", editId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", editId + COUNTER);\n                editButton(e);\n            }\n    \n            if (e.className.indexOf(\"update\") > -1) {\n                let helper = e.parentNode.childNodes[9];\n    \n                e.addEventListener(\"click\", () => { greenButton(e) })\n                e.setAttribute(\"id\", updateId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", updateId + COUNTER);\n            }\n    \n            if (e.className.indexOf(\"delete\") > -1) {\n                let helper = e.parentNode.childNodes[11];\n    \n                e.addEventListener(\"click\", () => { redButton(e) })\n                e.setAttribute(\"id\", deleteId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", deleteId + COUNTER);\n            }\n        }\n    });\n    document.querySelector(\"table>tbody\").appendChild(clone)\n\n    COUNTER++;\n\n    if (HIDDEN_ROW.parentElement.parentElement.hidden) {\n        showTable();\n    }\n}\n","function uuid() {\n  console.log(\"generating uuid...\");\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n","function greenButton(e) {\n    let tableRow = e.parentElement.parentElement;\n\n    if (tableRow.className) {\n        if (window.confirm(\"Are you sure an aspsp has built right?\")) {\n            saveButton(e);\n            console.log(\"saved\");\n        } else {\n            return;\n        }\n    } else {\n        if (window.confirm(\"Are you sure you want to update the aspsp?\")) {\n            updateButton(e);\n            console.log(\"updated\");\n        } else {\n            toggleButtons(e);\n        }\n    }\n}\n","function redButton(e) {\n    let tableRow = e.parentElement.parentElement;\n\n    if (tableRow.className) {\n        purgeRow(e);\n        console.log(\"row purged off\");\n    } else {\n        if (window.confirm(\"You you sure you want to delete this aspsp record?\")) {\n            deleteButton(e);\n            console.log(\"data deleted\");\n        } else {\n            toggleButtons(e);\n        }\n    }\n}\n","function editButton(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    if (editButton.style.display !== \"none\") {\n        editButton.style.display = \"none\";\n        updateOrSaveButton.style.display = \"inherit\";\n        deleteButton.style.display = \"inherit\";\n        editableCells(e);\n    }\n}","function deleteButton(e) {\n    let uuidCell = e.parentElement.parentElement.cells[0].innerText;\n    let url = \"http://localhost:8999/v1/aspsps/\" + uuidCell;\n\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"DELETE\", url, true);\n    if (xhr.status === 204) {\n        purgeRow(e);\n    } else {\n        xhr.onerror = function (e) {\n            console.error(xhr.statusText);\n        };\n    }\n    xhr.send(null);\n}\n","function updateButton(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    let row = e.parentNode.parentNode;\n\n    let uri = \"http://localhost:8999/v1/aspsps/\";\n\n    let id = \"{\\\"id\\\": \\\"\" + row.cells[0].textContent + \"\\\",\\n\";\n    let bankName = \"\\\"name\\\": \\\"\" + row.cells[1].textContent + \"\\\",\\n\";\n    let bic = \"\\\"bic\\\": \\\"\" + row.cells[2].textContent + \"\\\",\\n\";\n    let url = \"\\\"url\\\": \\\"\" + row.cells[3].textContent + \"\\\",\\n\";\n    let adapterId = \"\\\"adapterId\\\": \\\"\" + row.cells[4].textContent + \"\\\",\\n\";\n    let bankCode = \"\\\"bankCode\\\": \\\"\" + row.cells[5].textContent + \"\\\"}\";\n\n    let rawData = id + bankName + bic + url + adapterId + bankCode;\n\n    console.log(rawData);\n\n    let data = JSON.parse(rawData);\n\n    fetch(uri, {\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: data\n    }).then(response => {\n        if (response.statusText === 200) {\n            if (editButton.style.display === \"none\") {\n                editButton.style.display = \"inherit\";\n                updateOrSaveButton.style.display = \"none\";\n                deleteButton.style.display = \"none\";\n                uneditableCells(e);\n            }\n        }\n    });\n}","function saveButton(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    let row = e.parentNode.parentNode;\n\n    let uri = \"http://localhost:8999/v1/aspsps/\";\n\n    let id = \"{\\\"id\\\": \\\"\" + row.cells[0].textContent + \"\\\",\\n\";\n    let bankName = \"\\\"name\\\": \\\"\" + row.cells[1].textContent + \"\\\",\\n\";\n    let bic = \"\\\"bic\\\": \\\"\" + row.cells[2].textContent + \"\\\",\\n\";\n    let url = \"\\\"url\\\": \\\"\" + row.cells[3].textContent + \"\\\",\\n\";\n    let adapterId = \"\\\"adapterId\\\": \\\"\" + row.cells[4].textContent + \"\\\",\\n\";\n    let bankCode = \"\\\"bankCode\\\": \\\"\" + row.cells[5].textContent + \"\\\"}\";\n\n    let rawData = id + bankName + bic + url + adapterId + bankCode;\n\n    console.log(rawData);\n\n    let data = JSON.parse(rawData);\n\n    fetch(uri, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: data\n    }).then(response => {\n        if (response.statusText === 200) {\n            if (editButton.style.display === \"none\") {\n                editButton.style.display = \"inherit\";\n                updateOrSaveButton.style.display = \"none\";\n                deleteButton.style.display = \"none\";\n                uneditableCells(e);\n            }\n        }\n    });\n}\n","function purgeRow(e) {\n    let tableRow = e.parentElement.parentElement;\n\n    tableRow.remove();\n}\n","function buildRow(data) {\n    let editId = \"edit-\";\n    let updateId = \"update-\";\n    let deleteId = \"delete-\";\n\n    let clone = HIDDEN_ROW.cloneNode(true);\n    clone.removeAttribute(\"class\");\n    \n    clone.cells[0].textContent = data.id;\n    clone.cells[1].textContent = data.name;\n    clone.cells[2].textContent = data.bic;\n    clone.cells[3].textContent = data.url;\n    clone.cells[4].textContent = data.adapterId;\n    clone.cells[5].textContent = data.bankCode;\n\n    clone.lastElementChild.childNodes.forEach(e => {\n        if (e.className) {\n            if (e.className.indexOf(\"edit\") > -1) {\n                let helper = e.parentNode.childNodes[7];\n    \n                e.addEventListener(\"click\", () => { editButton(e) })\n                e.setAttribute(\"id\", editId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", editId + COUNTER);\n            }\n    \n            if (e.className.indexOf(\"update\") > -1) {\n                let helper = e.parentNode.childNodes[9];\n    \n                e.addEventListener(\"click\", () => { greenButton(e) })\n                e.setAttribute(\"id\", updateId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", updateId + COUNTER);\n            }\n    \n            if (e.className.indexOf(\"delete\") > -1) {\n                let helper = e.parentNode.childNodes[11];\n    \n                e.addEventListener(\"click\", () => { redButton(e) })\n                e.setAttribute(\"id\", deleteId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", deleteId + COUNTER);\n            }\n        }\n    });\n    document.querySelector(\"table>tbody\").appendChild(clone)\n\n    COUNTER++;\n}\n","function showTable() {\n    let table = HIDDEN_ROW.parentElement.parentElement;\n    let message = document.querySelector(\".welcome-message\");\n\n    table.hidden = false;\n    message.hidden = true;\n}"]}