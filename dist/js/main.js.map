{"version":3,"sources":["addEventListeners.js","globals.js","uneditableCells.js","toggleButtons.js","editableCells.js","searchButton.js","addRowButton.js","UUIDGenerator.js","greenButton.js","redButton.js","editButton.js","deleteButton.js","updateButton.js","saveButton.js","purgeRow.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["setTimeout(function () {\n    initGlobals();\n    document.querySelector(\".edit-cell>button.edit\").addEventListener(\"click\", function () { editButton(this) });\n    document.querySelector(\".edit-cell>button.update\").addEventListener(\"click\", function () { greenButton(this) });\n    document.querySelector(\".edit-cell>button.delete\").addEventListener(\"click\", function () { redButton(this) });\n    document.querySelector(\"#add>button\").addEventListener(\"click\", addRow);\n}, 0)\n","function initGlobals() {\n    window.HIDDEN_ROW = document.querySelector(\"tbody>tr.hidden\");\n    window.COUNTER = 0;\n}\n","function uneditableCells(e) {\n    let rowCells = e.parentElement.parentElement.cells;\n\n    for (let i = 1, till = (rowCells.length - 1); i < till; i++) {\n        rowCells[i].removeAttribute(\"contenteditable\");\n    }\n}\n","function toggleButtons(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    if (editButton.style.display === \"none\") {\n        editButton.style.display = \"inherit\";\n        updateOrSaveButton.style.display = \"none\";\n        deleteButton.style.display = \"none\";\n        uneditableCells(e);\n    } else {\n        editButton.style.display = \"none\";\n        updateOrSaveButton.style.display = \"inherit\";\n        deleteButton.style.display = \"inherit\";\n        editableCells(e);\n    }\n}\n","function editableCells(e) {\n    let rowCells = e.parentElement.parentElement.cells;\n\n    for (let i = 1, till = (rowCells.length - 1); i < till; i++) {\n        rowCells[i].setAttribute(\"contenteditable\", true);\n    }\n}\n","function search() {\n    let data = document.querySelector(\".search-form\");\n    let url = \"http://localhost:8999/v1/aspsps/?\";\n\n    if (data[0].value !== \"\")\n        url += \"name=\" + data[0].value + \"&\";\n    \n    if (data[1].value !== \"\")\n        url += \"bic=\" + data[1].value + \"&\";\n\n    if (data[2].value !== \"\")\n        url += \"bankCode=\" + data[2].value;\n\n    let output = fetch(url).then(response => response.json());\n\n    // TODO build table\n}","function addRow() {\n    let editId = \"edit-\";\n    let updateId = \"update-\";\n    let deleteId = \"delete-\";\n\n    let clone = HIDDEN_ROW.cloneNode(true);\n    clone.cells[0].textContent = uuid();\n    clone.removeAttribute(\"class\");\n    clone.setAttribute(\"class\", \"new\");\n    clone.lastElementChild.childNodes.forEach(e => {\n        if (e.className) {\n            if (e.className.indexOf(\"edit\") > -1) {\n                let helper = e.parentNode.childNodes[7];\n    \n                e.addEventListener(\"click\", () => { editButton(e) })\n                e.setAttribute(\"id\", editId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", editId + COUNTER);\n                editButton(e);\n            }\n    \n            if (e.className.indexOf(\"update\") > -1) {\n                let helper = e.parentNode.childNodes[9];\n    \n                e.addEventListener(\"click\", () => { greenButton(e) })\n                e.setAttribute(\"id\", updateId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", updateId + COUNTER);\n            }\n    \n            if (e.className.indexOf(\"delete\") > -1) {\n                let helper = e.parentNode.childNodes[11];\n    \n                e.addEventListener(\"click\", () => { redButton(e) })\n                e.setAttribute(\"id\", deleteId + COUNTER);\n    \n                helper.setAttribute(\"data-mdl-for\", deleteId + COUNTER);\n            }\n        }\n    });\n    document.querySelector(\"table>tbody\").appendChild(clone)\n\n    COUNTER++;\n}\n","function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      console.log(\"UUID generated\");\n      return v.toString(16);\n    });\n  }\n","function greenButton(e) {\n    let tableRow = e.parentElement.parentElement;\n\n    if (tableRow.className) {\n        saveButton(e);\n        console.log(\"saved\");\n    } else {\n        updateButton(e);\n        console.log(\"updated\");\n    }\n}\n","function redButton(e) {\n    let tableRow = e.parentElement.parentElement;\n\n    if (tableRow.className) {\n        purgeRow(e);\n        console.log(\"row purged off\");\n    } else {\n        deleteButton(e);\n        console.log(\"data deleted\");\n    }\n}\n","function editButton(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    if (editButton.style.display !== \"none\") {\n        editButton.style.display = \"none\";\n        updateOrSaveButton.style.display = \"inherit\";\n        deleteButton.style.display = \"inherit\";\n        editableCells(e);\n    }\n}","function deleteButton(e) {\n    let uuidCell = e.parentElement.parentElement.cells[0].innerText;\n    let url = \"http://localhost:8999/v1/aspsps/\" + uuidCell;\n\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"DELETE\", url, true);\n    if (xhr.status === 204) {\n        purgeRow(e);\n    } else {\n        xhr.onerror = function (e) {\n            console.error(xhr.statusText);\n        };\n    }\n    xhr.send(null);\n}\n","function updateButton(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    let row = e.parentNode.parentNode;\n\n    let uri = \"http://localhost:8999/v1/aspsps/\";\n\n    let id = \"{\\\"id\\\": \\\"\" + row.cells[0].textContent + \"\\\",\\n\";\n    let bankName = \"\\\"name\\\": \\\"\" + row.cells[1].textContent + \"\\\",\\n\";\n    let bic = \"\\\"bic\\\": \\\"\" + row.cells[2].textContent + \"\\\",\\n\";\n    let url = \"\\\"url\\\": \\\"\" + row.cells[3].textContent + \"\\\",\\n\";\n    let adapterId = \"\\\"adapterId\\\": \\\"\" + row.cells[4].textContent + \"\\\",\\n\";\n    let bankCode = \"\\\"bankCode\\\": \\\"\" + row.cells[5].textContent + \"\\\"}\";\n\n    let rawData = id + bankName + bic + url + adapterId + bankCode;\n\n    console.log(rawData);\n\n    let data = JSON.parse(rawData);\n\n    fetch(uri, {\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: data\n    }).then(response => {\n        if (response.statusText === 200) {\n            if (editButton.style.display === \"none\") {\n                editButton.style.display = \"inherit\";\n                updateOrSaveButton.style.display = \"none\";\n                deleteButton.style.display = \"none\";\n                uneditableCells(e);\n            }\n        }\n    });\n}","function saveButton(e) {\n    let editButton = e.parentNode.children[0];\n    let updateOrSaveButton = e.parentNode.children[1];\n    let deleteButton = e.parentNode.children[2];\n\n    let row = e.parentNode.parentNode;\n\n    let uri = \"http://localhost:8999/v1/aspsps/\";\n\n    let id = \"{\\\"id\\\": \\\"\" + row.cells[0].textContent + \"\\\",\\n\";\n    let bankName = \"\\\"name\\\": \\\"\" + row.cells[1].textContent + \"\\\",\\n\";\n    let bic = \"\\\"bic\\\": \\\"\" + row.cells[2].textContent + \"\\\",\\n\";\n    let url = \"\\\"url\\\": \\\"\" + row.cells[3].textContent + \"\\\",\\n\";\n    let adapterId = \"\\\"adapterId\\\": \\\"\" + row.cells[4].textContent + \"\\\",\\n\";\n    let bankCode = \"\\\"bankCode\\\": \\\"\" + row.cells[5].textContent + \"\\\"}\";\n\n    let rawData = id + bankName + bic + url + adapterId + bankCode;\n\n    console.log(rawData);\n\n    let data = JSON.parse(rawData);\n\n    fetch(uri, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: data\n    }).then(response => {\n        if (response.statusText === 200) {\n            if (editButton.style.display === \"none\") {\n                editButton.style.display = \"inherit\";\n                updateOrSaveButton.style.display = \"none\";\n                deleteButton.style.display = \"none\";\n                uneditableCells(e);\n            }\n        }\n    });\n}\n","function purgeRow(e) {\n    let tableRow = e.parentElement.parentElement;\n\n    tableRow.remove();\n}\n"]}